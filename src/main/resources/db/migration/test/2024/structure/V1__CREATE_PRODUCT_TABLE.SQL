create table trip_detail_record
(
    id        bigint generated by default as identity primary key,
    endtime   timestamp(6)     not null,
    sessionid varchar(50)      not null constraint tdr_sessoinid_unique unique,
    starttime timestamp(6)     not null,
    totalcost double precision not null constraint tdr_totalcost_check check (totalcost >= (0)::double precision),
    vehicleid varchar(50)      not null
);
ALTER TABLE trip_detail_record
    ADD CONSTRAINT start_time_validation
        CHECK (
            NOT EXISTS (
                SELECT 1
                FROM trip_detail_record AS other
                WHERE other.vehicleid = trip_detail_record.vehicleid
                  AND other.endtime > trip_detail_record.starttime
            )
            );

